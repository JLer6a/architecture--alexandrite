# Выбор и настройка мониторинга в системе

##  Мотивация
Система "Александрит" значительно расширилась, включая API-доступ для внешних пользователей, что увеличило нагрузку и количество жалоб. 
Без мониторинга трудно выявить узкие места и оперативно реагировать на проблемы.
Мониторинг поможет:

    - Выявлять узкие места в обработке заказов.
    - Предотвращать задержки и сбои в системе.
    - Улучшить производительность API и базы данных.
    - Уменьшить количество жалоб от клиентов и партнёров.
    - Оптимизировать использование ресурсов инфраструктуры.

## Выбор подхода к мониторингу
Для разных частей системы используются разные подходы:

    - RED (Rate, Errors, Duration) – для API (Shop API, CRM API, MES API) для оценки нагрузки, ошибок и времени ответа.
    - USE (Utilization, Saturation, Errors) – для баз данных и очереди сообщений (RabbitMQ) для оценки загрузки, перегрузки и ошибок.
    - Четыре золотых сигнала (латентность, трафик, ошибки, насыщенность) – для общего контроля всей системы.

## Метрики для отслеживания

API (Shop API, CRM API, MES API)

    - Number of requests (RPS) per API и per user – анализ нагрузки и предотвращение перегрузки.
    - Response time (latency) per API – контроль скорости работы API.
    - Number of HTTP 500 errors – выявление сбоев в API.
    - CPU % per API – мониторинг загрузки процессора.
    - Memory Utilization per API – контроль потребления памяти.
    - Number of simultanious sessions per API – контроль количества активных пользователей.

Очередь сообщений (RabbitMQ)

    - Number of dead-letter-exchange letters – анализ неудачных сообщений.
    - Number of messages in flight – контроль загруженности очереди.

Базы данных (Shop DB, MES DB)

    - Memory Utilisation per DB instance – контроль потребления памяти.
    - Number of connections per DB instance – выявление возможных проблем с подключениями.
    - Size of DB instances – контроль роста базы данных.

S3-хранилище (3D Files Storage)

    - Size of S3 storage – контроль использования пространства.

### Вывод

Добавление мониторинга позволит своевременно выявлять и устранять проблемы, минимизируя потери из-за сбоев и перегрузок. 
Это повысит удовлетворённость клиентов и партнёров, а также снизит финансовые потери из-за отмены заказов и расторжения контрактов.