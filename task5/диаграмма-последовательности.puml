@startuml
actor Operator
participant MES_UI as "MES UI"
participant Cache as "Redis"
participant MES_API as "MES API"
participant MES_DB as "MES DB"

== Загрузка списка заказов ==
Operator -> MES_UI : Открывает дашборд
MES_UI -> Cache : Запрос списка заказов по статусу
alt Данные есть в кешe
  Cache --> MES_UI : Возвращает заказы
else Кеша нет
  Cache --> MES_UI : MISS
  MES_UI -> MES_API : Запрос заказов
  MES_API -> MES_DB : SELECT * FROM orders WHERE status = X
  MES_DB --> MES_API : Список заказов
  MES_API -> Cache : Кладёт в кеш с TTL
  MES_API --> MES_UI : Отправляет список заказов
end

== Изменение статуса заказа ==
Operator -> MES_UI : Меняет статус
MES_UI -> MES_API : POST /order/123/status
MES_API -> MES_DB : Обновление статуса
MES_DB --> MES_API : OK
MES_API -> Cache : Удаляет ключ по заказу или дашборду
MES_API --> MES_UI : OK
@enduml
